<div class="container-fluid">

    <div class="col-md-3">
      <!--Sidebar content-->

      Search: <input id="inputSmall" class="form-control input-sm"
                     ng-model="query">
      <br/>
      Sort by:
      <select id="select" class="form-control" ng-model="orderProp">
        <option value="_criterion.name">Alphabetical</option>
        <option value="-mark">Rating</option>
        <option value="">Initial</option>
      </select>

    </div>

    <div class="col-md-9">
      <!--Body content-->

      <div class="row">
        <h2 class="col-md-8">{{cloudServiceDetails.name}}</h2>
        <div ng-show="canEdit"
             class="col-md-4">
          <h2>
            <a class="btn btn-info"
             ng-href="#/cloudservices/{{cloudServiceDetails._id}}/edit">
              Edit Service</a>
          </h2>
        </div>
      </div>            
      
      <div class="well" ng-show="cloudServiceDetails.description">
        {{cloudServiceDetails.description}}
      </div>

      <br/>

      <div ng-repeat="rating in cloudServiceDetails.ratings
                      | filter:query
                      | orderBy:orderProp" ng-class-even="'row'">
        
        <div class="criterion col-md-4"
             ng-class="{'criterion-red': (rating.mark == 0),
                       'criterion-amber': (rating.mark == 1) ,
                       'criterion-green': (rating.mark == 2)}">
          <div class="criterion-name">
            {{ rating._criterion.label }}
            <span popover-placement="left" 
                  popover="{{rating._criterion.description}}">
              <button type="button" class="btn btn-link">
                <span class="glyphicon glyphicon-info-sign"></span>
              </button>
            </span>
          </div>
          <p>Rating:
            <span class="label"
                  ng-class="{'label-danger': (rating.mark == 0),
                            'label-warning': (rating.mark == 1) ,
                            'label-success': (rating.mark == 2)}">
              &nbsp;</span>
            <span ng-show="{{rating.comment}}"
                  ng-controller="CommentModalCtrl">
              <span popover-placement="top"
                    popover="{{rating.comment}}">
                <span class="glyphicon glyphicon-comment"></span>
              </span>
            </span>            
          </p>
          <p ng-show="criterion.tags">Tags:
            {{ rating._criterion.tags }}</p>
        </div>
        
        <div class="criterion"
             ng-class="{'criterion-red': (rating.mark == 1),
                       'criterion-amber': (rating.mark == 2) ,
                       'criterion-green': (rating.mark == 3)}"
             ng-repeat="rating in ratings">
          <div class="criterion-title">{{ rating._criterion.label }}</div>
          <p>Rating: <span class="label"
                           ng-class="{'label-danger': (rating.mark == 1),
                                     'label-warning': (rating.mark == 2) ,
                                     'label-success': (rating.mark == 3)}">
              &nbsp;</span></p>
            <p ng-show="rating._criterion.tags">
              Tags: {{ rating._criterion.tags }}</p>
        </div>
      </div>
    </div>
    
</div>
