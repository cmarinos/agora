<div class="container-fluid">

  <div class="col-md-3">
    <!--Sidebar content-->

    Search: <input id="inputSmall" class="form-control input-sm"
                   ng-model="query">
    <br/>
    Sort by:
    <select id="select" class="form-control" ng-model="orderProp">
      <option value="_criterion.name">Alphabetical</option>
      <option value="mark">Rating</option>
      <option value="">Initial</option>
    </select>

  </div>

  <div class="col-md-9">
    <!--Body content-->

    <form novalidate>

      <h2>{{cloudServiceDetails.name}}
        <button type="button" class="btn btn-link"
                ng-click="nameEdit = !nameEdit">
          <span class="glyphicon glyphicon-pencil"></span>
        </button>          
      </h2>
      <h2 ng-show="nameEdit">
        <input type="text" ng-model="cloudServiceDetails.name">
      </h2>

      <div class="well">
        {{cloudServiceDetails.description}}
        <button type="button" class="btn btn-link"
                ng-click="descriptionEdit = !descriptionEdit">
          <span class="glyphicon glyphicon-pencil"></span>
        </button>          
      
        <input ng-show="descriptionEdit" class="form-control"
               type="text" ng-model="cloudServiceDetails.description">      
      </div>

      <div>
        <select ng-model="cloudServiceDetails.processingStatus"
                ng-options="processingStatus.value as processingStatus.label
                            for processingStatus in processingStatuses">
        </select>
      </div>
     
      <br/>

      <div ng-repeat="rating in cloudServiceDetails.ratings
                      | filter:query
                      | orderBy:orderProp" ng-class-even="'row'">
        
        <div class="criterion col-md-4"
             ng-class="{'criterion-red': (rating.mark == 0),
                       'criterion-amber': (rating.mark == 1) ,
                       'criterion-green': (rating.mark == 2)}">
          <div class="criterion-name">
            {{ rating._criterion.label }}
            <span popover-placement="left" 
                  popover="{{rating._criterion.description}}">
              <button type="button" class="btn btn-link">
                <span class="glyphicon glyphicon-info-sign"></span>
              </button>
            </span>          
          </div>
          <p>Rating: <span class="label"
                           ng-class="{'label-danger': (rating.mark == 0),
                                     'label-warning': (rating.mark == 1) ,
                                     'label-success': (rating.mark == 2)}">
              &nbsp;</span>
            <select ng-model="rating.mark"
                    ng-options="colour.value as colour.label
                                for colour in colours">
            </select>
            <span ng-controller="CommentModalCtrl">
              <span popover-placement="top"
                    popover="{{rating.comment}}">
                <span ng-class="{dimmed: !rating.comment}"
                      class="glyphicon glyphicon-comment"></span>
              </span>
              <button type="button" class="btn btn-link"
                      ng-click="openCommentModal()">
                <span class="glyphicon glyphicon-pencil"></span>
              </button>
            </span>
          </p>
          <p ng-show="criterion.tags">Tags: {{ rating._criterion.tags }}</p>
        </div>        
      </div>
      
      <div class="row">
        <div class="col-md-4">
          <button class="btn btn-lg btn-block"
                  ng-disabled="isUnchanged(cloudServiceDetails)"
                  ng-click="reset()">Reset</button>
        </div>        
        <div class="col-md-4">
          <button class="btn btn-lg btn-primary btn-block "
                  ng-click="update(cloudServiceDetails)">Save</button>
        </div>
      </div>
    </form>    
  </div>

</div>
